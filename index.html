<!DOCTYPE html>
<head>
    <meta charset="utf-8">
</head>
<body>
    <h1>Rock, Paper, Scissors</h1>
    <h3>Choose:</h3>
    <div id="container">
        <div id="btn-wrapper">
            <button id="rock">Rock</button>
            <button id="paper">Paper</button>
            <button id="scissors">Scissors</button>
        </div>
        <h2 id="current-score">Current score: You 0 - 0 AI</h2>
        <div id="results"></div>
    </div>

    <script>

        // Initialise the scores to 0
        let playerScore = 0;
        let computerScore = 0;

        const btnRock = document.querySelector('#rock');
        const btnPaper = document.querySelector('#paper');
        const btnScissors = document.querySelector('#scissors');
        const results = document.querySelector('#results');
        const score = document.querySelector('#current-score');

        btnRock.addEventListener('click', (e) => playRound(e.target.id, computerPlay()) );
        btnPaper.addEventListener('click', (e) => playRound(e.target.id, computerPlay()) );
        btnScissors.addEventListener('click', (e) => playRound(e.target.id, computerPlay()) );

        function computerPlay() {

            //Get a random computer choice
            const computerChoice = Math.floor(Math.random() * 3);

            if(computerChoice === 0){ return "rock"; }
            else if (computerChoice === 1){ return "paper"; }
            else { return "scissors"; }
        }
      
        function playRound(playerSelection, computerSelection){

            // Player selection
            console.log("Player chooses: " + playerSelection);

            // Show the computer choice
            console.log("Computer chooses: " + computerSelection);

            //If the player wins
            if((playerSelection === "rock" && computerSelection === "scissors") || 
            (playerSelection === "paper" && computerSelection === "rock") ||
            (playerSelection === "scissors" && computerSelection === "paper")){
                
                playerScore++;

                if(playerSelection === "rock") {
                    const p = document.createElement('p');
                    results.appendChild(p);
                    p.textContent = "You win! Rock beat scissors.";
                    console.log("You win! Rock beat scissors.");
                }
                else if(playerSelection === "paper") {
                    const p = document.createElement('p');
                    results.appendChild(p);
                    p.textContent = "You win! Paper beats rock.";
                    console.log("You win! Paper beats rock.");
                }
                else {
                    const p = document.createElement('p');
                    results.appendChild(p);
                    p.textContent = "You win! Scissors beats paper!";
                    console.log("You win! Scissors beats paper!");
                }
            }

            //If the computer wins
            else if((computerSelection === "rock" && playerSelection === "scissors") || 
            (computerSelection === "paper" && playerSelection === "rock") ||
            (computerSelection === "scissors" && playerSelection === "paper")) {

                computerScore++;
                
                if(computerSelection === "rock") {
                    const p = document.createElement('p');
                    results.appendChild(p);
                    p.textContent = "You lose! Rock beat scissors.";
                    console.log("You lose! Rock beat scissors.");
                }
                else if(computerSelection === "paper") {
                    const p = document.createElement('p');
                    results.appendChild(p);
                    p.textContent = "You lose! Paper beats rock.";
                    console.log("You lose! Paper beats rock.");
                }
                else {
                    const p = document.createElement('p');
                    results.appendChild(p);
                    p.textContent = "You lose! Scissors beats paper!";
                    console.log("You lose! Scissors beats paper!");
                }

            }
            //If match is tied
            else {
                const p = document.createElement('p');
                results.appendChild(p);
                p.textContent = "Round is tied.";
                console.log("Round is tied.")
            }
            
            score.textContent = "Current score: You " + playerScore + " - " + computerScore + " AI";
            console.log("Current score: You " + playerScore + " - " + computerScore + " AI");

            // Display the winner and scores
            if(playerScore === 5){
                const p = document.createElement('p');
                results.appendChild(p);
                score.textContent = "Congratulations! You win the match: " + playerScore + " - " + computerScore;
                p.textContent = "Congratulations! You win the match: " + playerScore + " - " + computerScore;
                console.log("Congratulations! You win the match: " + playerScore + " - " + computerScore);
                playerScore = 0;
                computerScore = 0;
            }
        
            if(computerScore === 5){
                const p = document.createElement('p');
                results.appendChild(p);
                score.textContent = "Unlucky! Computer wins the match: " + computerScore + " - " + playerScore;
                p.textContent = "Unlucky! Computer wins the match: " + computerScore + " - " + playerScore;
                console.log("Unlucky! Computer wins the match: " + computerScore + " - " + playerScore);
                playerScore = 0;
                computerScore = 0;
            }
        }
    </script>
</body>
</html>